var gt=e=>{throw TypeError(e)};var it=(e,t,s)=>t.has(e)||gt("Cannot "+s);var i=(e,t,s)=>(it(e,t,"read from private field"),s?s.call(e):t.get(e)),d=(e,t,s)=>t.has(e)?gt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),a=(e,t,s,r)=>(it(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),b=(e,t,s)=>(it(e,t,"access private method"),s);import{r as S}from"./index-CyZvArFk.js";var dt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},K=typeof window>"u"||"Deno"in globalThis;function Dt(){}function mt(e){return typeof e=="number"&&e>=0&&e!==1/0}function kt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Z(e,t){return typeof e=="function"?e(t):e}function E(e,t){return typeof e=="function"?e(t):e}function jt(e,t){if(e===t)return e;const s=Rt(e)&&Rt(t);if(s||wt(e)&&wt(t)){const r=s?e:Object.keys(e),n=r.length,h=s?t:Object.keys(t),u=h.length,c=s?[]:{};let f=0;for(let v=0;v<u;v++){const g=s?v:h[v];(!s&&r.includes(g)||s)&&e[g]===void 0&&t[g]===void 0?(c[g]=void 0,f++):(c[g]=jt(e[g],t[g]),c[g]===e[g]&&e[g]!==void 0&&f++)}return n===u&&f===n?e:c}return t}function rt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Rt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wt(e){if(!Ot(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Ot(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ot(e){return Object.prototype.toString.call(e)==="[object Object]"}function St(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?jt(e,t):t}var T,F,D,Qt,_t=(Qt=class extends dt{constructor(){super();d(this,T);d(this,F);d(this,D);a(this,D,t=>{if(!K&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,F)||this.setEventListener(i(this,D))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,F))==null||t.call(this),a(this,F,void 0))}setEventListener(t){var s;a(this,D,t),(s=i(this,F))==null||s.call(this),a(this,F,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){i(this,T)!==t&&(a(this,T,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof i(this,T)=="boolean"?i(this,T):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},T=new WeakMap,F=new WeakMap,D=new WeakMap,Qt),At=new _t,k,x,_,Lt,Bt=(Lt=class extends dt{constructor(){super();d(this,k,!0);d(this,x);d(this,_);a(this,_,t=>{if(!K&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,x)||this.setEventListener(i(this,_))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,x))==null||t.call(this),a(this,x,void 0))}setEventListener(t){var s;a(this,_,t),(s=i(this,x))==null||s.call(this),a(this,x,t(this.setOnline.bind(this)))}setOnline(t){i(this,k)!==t&&(a(this,k,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return i(this,k)}},k=new WeakMap,x=new WeakMap,_=new WeakMap,Lt),zt=new Bt;function Ct(){let e,t;const s=new Promise((n,h)=>{e=n,t=h});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},s.reject=n=>{r({status:"rejected",reason:n}),t(n)},s}function Ht(e){return(e??"online")==="online"?zt.isOnline():!0}var Nt=e=>setTimeout(e,0);function Vt(){let e=[],t=0,s=c=>{c()},r=c=>{c()},n=Nt;const h=c=>{t?e.push(c):n(()=>{s(c)})},u=()=>{const c=e;e=[],c.length&&n(()=>{r(()=>{c.forEach(f=>{s(f)})})})};return{batch:c=>{let f;t++;try{f=c()}finally{t--,t||u()}return f},batchCalls:c=>(...f)=>{h(()=>{c(...f)})},schedule:h,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{n=c}}}var Pt=Vt();function Wt(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ht(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}var R,o,q,m,j,A,I,Q,G,B,z,P,U,L,H,l,$,nt,ot,at,ht,ct,ut,lt,Ut,Tt,$t=(Tt=class extends dt{constructor(t,s){super();d(this,l);d(this,R);d(this,o);d(this,q);d(this,m);d(this,j);d(this,A);d(this,I);d(this,Q);d(this,G);d(this,B);d(this,z);d(this,P);d(this,U);d(this,L);d(this,H,new Set);this.options=s,a(this,R,t),a(this,Q,null),a(this,I,Ct()),this.options.experimental_prefetchInRender||i(this,I).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,o).addObserver(this),Et(i(this,o),this.options)?b(this,l,$).call(this):this.updateResult(),b(this,l,ht).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ft(i(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ft(i(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,b(this,l,ct).call(this),b(this,l,ut).call(this),i(this,o).removeObserver(this)}setOptions(t){const s=this.options,r=i(this,o);if(this.options=i(this,R).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof E(this.options.enabled,i(this,o))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");b(this,l,lt).call(this),i(this,o).setOptions(this.options),s._defaulted&&!rt(this.options,s)&&i(this,R).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,o),observer:this});const n=this.hasListeners();n&&Ft(i(this,o),r,this.options,s)&&b(this,l,$).call(this),this.updateResult(),n&&(i(this,o)!==r||E(this.options.enabled,i(this,o))!==E(s.enabled,i(this,o))||Z(this.options.staleTime,i(this,o))!==Z(s.staleTime,i(this,o)))&&b(this,l,nt).call(this);const h=b(this,l,ot).call(this);n&&(i(this,o)!==r||E(this.options.enabled,i(this,o))!==E(s.enabled,i(this,o))||h!==i(this,L))&&b(this,l,at).call(this,h)}getOptimisticResult(t){const s=i(this,R).getQueryCache().build(i(this,R),t),r=this.createResult(s,t);return qt(this,r)&&(a(this,m,r),a(this,A,this.options),a(this,j,i(this,o).state)),r}getCurrentResult(){return i(this,m)}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s==null||s(n),Reflect.get(r,n))})}trackProp(t){i(this,H).add(t)}getCurrentQuery(){return i(this,o)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,R).defaultQueryOptions(t),r=i(this,R).getQueryCache().build(i(this,R),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return b(this,l,$).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,m)))}createResult(t,s){var vt;const r=i(this,o),n=this.options,h=i(this,m),u=i(this,j),c=i(this,A),v=t!==r?t.state:i(this,q),{state:g}=t;let p={...g},N=!1,y;if(s._optimisticResults){const O=this.hasListeners(),X=!O&&Et(t,s),M=O&&Ft(t,r,s,n);(X||M)&&(p={...p,...Wt(g.data,t.options)}),s._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:V,errorUpdatedAt:W,status:w}=p;y=p.data;let J=!1;if(s.placeholderData!==void 0&&y===void 0&&w==="pending"){let O;h!=null&&h.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData)?(O=h.data,J=!0):O=typeof s.placeholderData=="function"?s.placeholderData((vt=i(this,z))==null?void 0:vt.state.data,i(this,z)):s.placeholderData,O!==void 0&&(w="success",y=St(h==null?void 0:h.data,O,s),N=!0)}if(s.select&&y!==void 0&&!J)if(h&&y===(u==null?void 0:u.data)&&s.select===i(this,G))y=i(this,B);else try{a(this,G,s.select),y=s.select(y),y=St(h==null?void 0:h.data,y,s),a(this,B,y),a(this,Q,null)}catch(O){a(this,Q,O)}i(this,Q)&&(V=i(this,Q),y=i(this,B),W=Date.now(),w="error");const tt=p.fetchStatus==="fetching",et=w==="pending",st=w==="error",bt=et&&tt,yt=y!==void 0,C={status:w,fetchStatus:p.fetchStatus,isPending:et,isSuccess:w==="success",isError:st,isInitialLoading:bt,isLoading:bt,data:y,dataUpdatedAt:p.dataUpdatedAt,error:V,errorUpdatedAt:W,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>v.dataUpdateCount||p.errorUpdateCount>v.errorUpdateCount,isFetching:tt,isRefetching:tt&&!et,isLoadingError:st&&!yt,isPaused:p.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:st&&yt,isStale:pt(t,s),refetch:this.refetch,promise:i(this,I)};if(this.options.experimental_prefetchInRender){const O=Y=>{C.status==="error"?Y.reject(C.error):C.data!==void 0&&Y.resolve(C.data)},X=()=>{const Y=a(this,I,C.promise=Ct());O(Y)},M=i(this,I);switch(M.status){case"pending":t.queryHash===r.queryHash&&O(M);break;case"fulfilled":(C.status==="error"||C.data!==M.value)&&X();break;case"rejected":(C.status!=="error"||C.error!==M.reason)&&X();break}}return C}updateResult(){const t=i(this,m),s=this.createResult(i(this,o),this.options);if(a(this,j,i(this,o).state),a(this,A,this.options),i(this,j).data!==void 0&&a(this,z,i(this,o)),rt(s,t))return;a(this,m,s);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,h=typeof n=="function"?n():n;if(h==="all"||!h&&!i(this,H).size)return!0;const u=new Set(h??i(this,H));return this.options.throwOnError&&u.add("error"),Object.keys(i(this,m)).some(c=>{const f=c;return i(this,m)[f]!==t[f]&&u.has(f)})};b(this,l,Ut).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&b(this,l,ht).call(this)}},R=new WeakMap,o=new WeakMap,q=new WeakMap,m=new WeakMap,j=new WeakMap,A=new WeakMap,I=new WeakMap,Q=new WeakMap,G=new WeakMap,B=new WeakMap,z=new WeakMap,P=new WeakMap,U=new WeakMap,L=new WeakMap,H=new WeakMap,l=new WeakSet,$=function(t){b(this,l,lt).call(this);let s=i(this,o).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Dt)),s},nt=function(){b(this,l,ct).call(this);const t=Z(this.options.staleTime,i(this,o));if(K||i(this,m).isStale||!mt(t))return;const r=kt(i(this,m).dataUpdatedAt,t)+1;a(this,P,setTimeout(()=>{i(this,m).isStale||this.updateResult()},r))},ot=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,o)):this.options.refetchInterval)??!1},at=function(t){b(this,l,ut).call(this),a(this,L,t),!(K||E(this.options.enabled,i(this,o))===!1||!mt(i(this,L))||i(this,L)===0)&&a(this,U,setInterval(()=>{(this.options.refetchIntervalInBackground||At.isFocused())&&b(this,l,$).call(this)},i(this,L)))},ht=function(){b(this,l,nt).call(this),b(this,l,at).call(this,b(this,l,ot).call(this))},ct=function(){i(this,P)&&(clearTimeout(i(this,P)),a(this,P,void 0))},ut=function(){i(this,U)&&(clearInterval(i(this,U)),a(this,U,void 0))},lt=function(){const t=i(this,R).getQueryCache().build(i(this,R),this.options);if(t===i(this,o))return;const s=i(this,o);a(this,o,t),a(this,q,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Ut=function(t){Pt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,m))}),i(this,R).getQueryCache().notify({query:i(this,o),type:"observerResultsUpdated"})})},Tt);function Kt(e,t){return E(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Et(e,t){return Kt(e,t)||e.state.data!==void 0&&ft(e,t,t.refetchOnMount)}function ft(e,t,s){if(E(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&pt(e,t)}return!1}function Ft(e,t,s,r){return(e!==t||E(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&pt(e,s)}function pt(e,t){return E(t.enabled,e)!==!1&&e.isStaleByTime(Z(t.staleTime,e))}function qt(e,t){return!rt(e.getCurrentResult(),t)}var Gt=S.createContext(void 0),Jt=e=>{const t=S.useContext(Gt);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Mt=S.createContext(!1),Xt=()=>S.useContext(Mt);Mt.Provider;function Yt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Zt=S.createContext(Yt()),te=()=>S.useContext(Zt);function ee(e,t){return typeof e=="function"?e(...t):!!e}function xt(){}var se=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ie=e=>{S.useEffect(()=>{e.clearReset()},[e])},re=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||ee(s,[e.error,r])),ne=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...s)=>Math.max(t(...s),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},oe=(e,t)=>e.isLoading&&e.isFetching&&!t,ae=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,It=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function he(e,t,s){var p,N,y,V,W;const r=Jt(s),n=Xt(),h=te(),u=r.defaultQueryOptions(e);(N=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||N.call(p,u),u._optimisticResults=n?"isRestoring":"optimistic",ne(u),se(u,h),ie(h);const c=!r.getQueryCache().get(u.queryHash),[f]=S.useState(()=>new t(r,u)),v=f.getOptimisticResult(u),g=!n&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(w=>{const J=g?f.subscribe(Pt.batchCalls(w)):xt;return f.updateResult(),J},[f,g]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),S.useEffect(()=>{f.setOptions(u)},[u,f]),ae(u,v))throw It(u,f,h);if(re({result:v,errorResetBoundary:h,throwOnError:u.throwOnError,query:r.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw v.error;if((V=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||V.call(y,u,v),u.experimental_prefetchInRender&&!K&&oe(v,n)){const w=c?It(u,f,h):(W=r.getQueryCache().get(u.queryHash))==null?void 0:W.promise;w==null||w.catch(xt).finally(()=>{f.updateResult()})}return u.notifyOnChangeProps?v:f.trackResult(v)}function fe(e,t){return he(e,$t,t)}async function de(){const e=await fetch("/api/blog");if(!e.ok)throw new Error("Failed to fetch blog posts");return e.json()}async function pe(){try{const e=await fetch("/api/services");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching services:",e),e}}export{de as a,pe as f,fe as u};
